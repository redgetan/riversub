<div class="comment comment_form_container"
data-shortid="<%= comment.short_id %>">

<%= form_for comment, :html => { :id => "edit_comment_#{comment.short_id}" } do |f| %>
  <% if comment.errors.any? %>
    <%= errors_for comment %>
  <% end %>

  <%= hidden_field_tag "commentable_short_id", comment.commentable.short_id %>

  <% if comment.parent_comment %>
    <%= hidden_field_tag "parent_comment_short_id", comment.parent_comment.short_id %>
  <% end %>

  <div style="width: 100%;">
    <%= text_area_tag "comment", comment.body, :rows => 5,
      :style => "width: 100%;", :autocomplete => "off", :disabled => !user_signed_in?,
      :placeholder => (user_signed_in? ? "" : "You must be logged in to leave a comment.")
      %>

    <p></p>

    <div class="markdown_help_toggler">
      <%= button_tag "#{comment.new_record?? "Post" : "Update"}",
        :class => "comment-post", :type => "button",
        :disabled => !user_signed_in? %>
      &nbsp;
      <% if comment.persisted? || comment.parent_comment_id %>
        &nbsp;
        <%= button_tag "Cancel", :class => "comment-cancel", :type => "button" %>
      <% end %>
        
      <div style="clear: both;"></div>
    </div>
  </div>

  <p></p>
<% end %>
</div>
